## GCC 编译器介绍

GCC（GNU Compiler Collection，GNU 编译器套件），是由 GNU 开发的编程语言编译器。它是以 GPL 许可证所发行的自由软件，也是 GNU 计划的关键部分。GCC 原本作为 GNU 操作系统的官方编译器，现已被大多数类 Unix 操作系统（如 Linux、BSD、Mac OS X 等）采纳为标准的编译器，GCC 同样适用于微软的 Windows. 目前 GCC 是 Linux 下重要的软件开发工具之一
GCC 是一个交叉平台的编译器，目前支持几乎所有主流 CPU 处理器平台，它可以完成从 C++、C、objective-C 等源文件向运行在特定硬件上的目标代码的转换，GCC 小巧且功能强大，目前已广泛应用于 linux 系统中

```
GCC 常用后缀
.c                 C 语言源程序
.i                 已经预处理过的 C 源代码程序
.s                 汇编语言源程序
.o                 编译后的目标文件
.a                 由目标文件构成的档案库文件
.C;；cc；.cxx       C++源程序
.h                 源程序包含的头文件
.m                 Objective-C 源程序


GCC 里包含的众多的工具
C 编译器 cc, cc1, gcc
C++编译器 c++, g++
源码预处理程序 cpp
库文件 libgcc.a, libgcc_s.so


GCC 编译程序分成下面几步，不干预，默认会逐步自动执行完成
预处理（Pre-Processing）
编译（Compiling）
汇编（Assembling）
链接（Linking）

gcc main.c    四个步骤自动完成生成执行文件 a.out
gcc -E main.c > main.i   停在预处理处
gcc -S main.c   停在编译处
gcc -c main.c   停在汇编处
```

## GCC 编译选项解析

GCC 拥有许多命令选项，超过 100 个的编译选项可用，可以公共输入 gcc --help 查看

### 常用编译选项

-e 选项：停在预处理阶段，仅做预处理，不再完成后面的步骤
-S 选项：停止编译阶段，编译后生成.s 为后缀的文件
-c 选项：停止汇编阶段，并不做第四步的链接的工作,生成.o 为后缀的文件
-v 选项: 显示版本
-I\<DIR\>选项：库依赖选项，指定库及头文件路径,-I 选项可以向 GCC 的头文件搜索路径中添加新的目录\<DIR\>
-L\<DIR\>：类似上面的情况，用来特别指定所依赖库所在的路径
-static 选项：GCC 在默认情况下链接的是动态库，有时为了把一些函数静态编译到程序中，而无需链接动态库就采用-static 选项，它会强制程序链接静态库。
-o 选项：默认的状态下 GCC 指令没有指定编译选项的情况下会在当前目录下生成一个名位 a.out 的可执行程序，`gcc -o main main.c`会在当前目录下生成一个名为 Main 的可执行文件

### 出错检查和警告提示选项

-w 禁止输出警告消息
-Wall 显示所有的警告消息

### 代码优化选项

-O 选项：编译时使用选项-O 可以告诉 GCC 同时减小代码的长度和执行时间，其效果等价于-O1
-O2 选项：选项-O2 告诉 GCC 除了完成所有-O1 级别的优化之外，同时还要进行一些额外的调整工作，如处理器指令调度等

### 调试分析选项

-g 选项：生成调试信息，GNU 调试器可利用该信息。GCC 编译器使用该选项进行编译时，将调试信息加入到目标文件当中，这样 gdb 调试器就可以根据这些调试信息来跟踪程序的执行状态;通常推荐仅在程序的开发和调试阶段中使用

-pg 选项：编译完成之后，额外产生一个性能分析所需的信息

## GDB 调试器介绍

Linux 下的 GNU 的调试器称为 GDB（GNU Debugger），该软件最早由 Richard Stallman 编写，GDB 是一个用来调试 C 和 C++程序的调试器（Debugger）。使用者能在程序运行时观察程序的内部结构和内存的使用情况，GDB 是一种基于命令行工作模式下的程序，工作在字符模式，由多个不同的图形用户界面前端予以支持，每个前端都能以多种方式提供调试控制功能，它的功能非常丰富，适用于修复程序代码中的问题。官网地址`http://www.gnu.org/software/gdb/`

GDB 提供的一些功能。1.启动程序，并且可以设置运行环境和参数来运行指定程序。2.让程序在指定断点处停止执行。3.对程序做出相应的调整，这样就能纠正一个错误后继续调试;

GDB 调试的是可执行文件，而不是源程序，如果想让 GDB 调试编译后生成的可执行文件，在使用 GDB 工具调试程序之前，必须使用带有-g 或-gdb 编译选项的 gcc 命令来编译源程序

```
gdb [参数] Filename

-hel     列出所有参数，并作简要说明
-symbols=file/-s file    读出文件（file）的所有符号
-core/-c      这里的 core 是程序非法执行后 core dump 后产生的文件
-directory/-d      加入一个源文件的搜索路径。默认搜索路径是环境变量中 PATH 所定义的路径
-quiet/-q      使用该参数不显示 gdb 的介绍和版权信息等
```

## GDB 调试命令

```
gdb FileName

之后就可以在系统的（gdb）提示符后面输入相应的调试命令,如果不希望出现gdb 的系统信息提示可以加入 -q


常用 GDB 命令
file     指定要调试的可执行程序
kill     终止正在调试的可执行程序
next     执行一行源代码但并不进入函数内部
list     部分列出源代码
step     执行一行源代码并不进入函数内部
run      执行当前的可执行程序
quit     结束 gdb 调试任务
watch    可以检查一个变量的值而不管它何时被改变
print    打印表达式的值到标准输出
break N  在指定的第 N 行源代码设置断点
info break    显示当前断点清单，包括到达断点处的次数等
info files    显示被调试文件的详细信息
info func     显示所有的函数名
info local    显示当函数中的局部变量信息
info prog     显示被调试程序的执行状态
info var      显示所有的全局和静态变量名称
make      在不退出 gdb 的情况下运行 make 工具
shell     在不退出 gdb 的情况下运行 shell 命令
continue  继续执行正在调试的程序


清除断点
clear n  清除第 n 行处的断点
比删除更好的一种方法是 disable 命令，关闭了断点，它并不会被删除，它只是让所设断点暂时失效，当还需要改断点时，enable 即可
disable break
enable break

查看变量的值 print <变量名>
想看到变量的类型 whatis <变量名>

step 指令，单步进入，可以跟踪到函数内部。命令是 step 或 s
next 指令，单步，只是简单的单步执行，不会进入函数内部。命令是 next 或 n

搜索源代码 forward-search [string]/search [string]/reverse-search [string]
```
